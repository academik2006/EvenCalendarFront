
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –æ—Ç –°—É—à–∏ –ú–∞—Å—Ç–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> 
    <link rel="stylesheet" href="main.css">  
    <script src="cards.js"></script>        
</head>
<body>

<audio loop id="audioMain">
    <source src="music/jingle_bells_7.mp3" type="audio/mpeg">    
    –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
</audio>

<div id = "start-screen-id" class="start-screen">
    <div>
        <div class="title_28_white" style="margin-top: 280px; margin-left: 20px; margin-right: 20px;">
            <p>–ì–æ—Ç–æ–≤–∏–º—Å—è –∫ –Ω–æ–≤–æ–º—É –≥–æ–¥—É!</p>
        </div>   
        <div class="text_14_white" style="margin-top: 20px; margin-left: 20px; margin-right: 20px;">
            <p>–ù–∞—à –∞–¥–≤–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–∞—Ç—ã, –∞ 31 –º–æ–º–µ–Ω—Ç –¥–æ–±—Ä–æ—Ç—ã, —É–ª—ã–±–æ–∫ –∏ –ø—Ä–∏—è—Ç–Ω—ã—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤. –û—Ç–∫—Ä—ã–≤–∞–π –ø–æ –æ–¥–Ω–æ–º—É –æ–∫–æ—à–∫—É –≤ –¥–µ–Ω—å, —á–∏—Ç–∞–π –ø–æ–∂–µ–ª–∞–Ω–∏—è, —Å–º–µ–π—Å—è, –≤–µ—Ä—å –≤ —á—É–¥–µ—Å–∞ –∏ –ø–æ–ª—É—á–∞–π –ø–æ–¥–∞—Ä–∫–∏ –æ—Ç –°—É—à–∏ –ú–∞—Å—Ç–µ—Ä.</p>
        </div>       
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="show-rules" class="button-common button-common-rules">–ß–∏—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>      
        </div>                
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="start-game" class="button-common">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>      
        </div>                                                     
    </div>
    </div>   
</div>


<div id = "rules-screen-id" class="rules-screen">
    <div>
        <div class="title_28_white">
            <p>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–≥–∏—è –î–µ–∫–∞–±—Ä—è</p>
        </div>                
        <div class="rules-screen-body">
            <br> 1. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∫–ª–∏–∫–∞–π –Ω–∞ –Ω–æ–≤–æ–µ –æ–∫–æ—à–∫–æ. üéâ.<br>
            <br> 2. –õ–æ–≤–∏ –¥–æ–±—Ä–æ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ, –Ω–µ–º–Ω–æ–≥–æ —É–ª—ã–±–æ–∫ –∏ —Å—é—Ä–ø—Ä–∏–∑ –æ—Ç –Ω–∞—Å. <br>
            <br> 3. –ü–æ–≤—Ç–æ—Ä–∏ –∑–∞–≤—Ç—Ä–∞. <br>            
            <br> –¢–∞–∫ –∏ –¥–æ–π–¥—ë–º –¥–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞ ‚Äî –±–æ–¥—Ä–æ, —Å –≤–µ—Ä–æ–π –≤ —á—É–¥–æ –∏ —Å –æ—â—É—â–µ–Ω–∏–µ–º, —á—Ç–æ –í—Å—ë —Ä–µ–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è!<br>
        </div>        
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="start-game2" class="button-common">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>      
        </div>
    </div>   
</div>

<div id = "event_calendar_screen_id" class="event-calendar-screen-container">   

    <div class="container grid-row" style="background-color: transparent;">
        <div>
            <button id="music-off" class="music-button">
                <img src="pic/sound_on.png" alt="turn_sound_pic">
            </button>                                                
        </div>

        <div>
            <p id="data-today-text" class="title_28_white"> 21.10.2025 </p>                                 
        </div>
    </div>        
                
    <div class="card-grid">        
        <div id="cards-container"></div>
    </div>   

    <div class="image-event-calendar-footer-screen">            
        <img src="pic/big_cat.png" alt="little_cat_pic">
    </div>  


            
</div>

<div id="open-card-id" class="open-card">
    <div>
        <div class="modal-image">            
            <img src="pic/02.png" alt="card_pic">
        </div>               
        <div id="card-text" class="open-card-body">
            <p>–°–µ—Ç –¢–í–û–ô –ë–†–û —Å–æ —Å–∫–∏–¥–∫–æ–π 25%</p>
        </div>        

        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="take-promocode-button" class="button-common button-common-rules">–ó–∞–±—Ä–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</button>            
        </div>        

        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="return-game-button" class="button-common">–ù–∞–∑–∞–¥</button>            
        </div>
    </div>
</div>

<script>


let rowsContainer = document.getElementById('cards-container');
let isMusicPlay = true;
let audioMain = document.getElementById("audioMain");

document.getElementById('start-game').addEventListener('click', startGame);
document.getElementById('start-game2').addEventListener('click', startGame);
document.getElementById('cards-container').addEventListener('click', showMisterSuHint)
document.getElementById('show-rules').addEventListener('click', showRules);
document.getElementById('music-off').addEventListener('click', switchMusic);

document.getElementById("return-game-button").addEventListener("click", function () {
    hideDialog(); // –°–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥    
});


    function generateCards() {
    let rowsContainer = document.getElementById('cards-container');   

    for (let i = 0; i < Math.ceil(cards.length / 3); i++) {
        let rowDiv = document.createElement('div');
        rowDiv.className = 'row';

        for (let j = 0; j < 3 && ((i * 3) + j) < cards.length; j++) {
            const cardData = cards[(i * 3) + j];
            let cardDiv = document.createElement('div');
            cardDiv.className = 'card';
            if (i === Math.floor(cards.length / 3)) { // –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞?
                cardDiv.className += ' last-row-card'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–∞—Ä—Ç—ã
            }
            cardDiv.style.backgroundImage = `url('pic/open_now_bg.png')`;

            // –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
            cardDiv.innerHTML = `                
                <img src="${cardData.imageUrl}" alt=""/>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä—É–∂–æ–∫ —Å –Ω–æ–º–µ—Ä–æ–º
            let circleDiv = document.createElement('div');
            circleDiv.className = 'circle-number';
            circleDiv.style.position = 'absolute';
            circleDiv.style.right = '5px';
            circleDiv.style.top = '5px';
            circleDiv.style.width = '30px';
            circleDiv.style.height = '30px';
            circleDiv.style.backgroundImage = `url('pic/cifra_back.png')`;
            circleDiv.style.backgroundSize = 'cover';
            circleDiv.style.borderRadius = '50%';
            circleDiv.style.display = 'flex';
            circleDiv.style.alignItems = 'center';
            circleDiv.style.justifyContent = 'center';

            // –¶–∏—Ñ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –∫—Ä—É–∂–∫–∞
            let numberSpan = document.createElement('span');
            numberSpan.className = 'circle-text';
            numberSpan.style.color = '#fff';
            numberSpan.style.fontSize = '14px';
            numberSpan.textContent = `${cardData.number}`;
            circleDiv.appendChild(numberSpan);

            // –î–æ–±–∞–≤–ª—è–µ–º –∫—Ä—É–∂–æ–∫ –≤ –∫–∞—Ä—Ç–æ—á–∫—É
            cardDiv.appendChild(circleDiv);

            rowDiv.appendChild(cardDiv);
        }
        rowsContainer.appendChild(rowDiv);
    }
}

           
    function startGame() {
        generateCards()        
        document.getElementById('event_calendar_screen_id').style.display = "block";
        document.getElementById('start-screen-id').style.display = "none";
        document.getElementById('rules-screen-id').style.display = "none";                
        audioMain.volume = 0.2;                
        audioMain.play();           
    }

    function showRules() {
        document.getElementById('rules-screen-id').style.display = "block";
        document.getElementById('start-screen-id').style.display = "none";                    
    }
    
           
    function showResultScreen() {
        document.getElementById('main_questions_screen_id').style.display = "none";
        document.getElementById('game_stage_screen_id').style.display = "block";
    }

    function switchMusic() {
    const button = document.getElementById('music-off');
    const image = button.querySelector('img');

    if (isMusicPlay) {
        audioMain.pause();
        isMusicPlay = false;
        // –ú–µ–Ω—è–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –Ω–∞ –Ω–æ–≤—É—é
        image.src = 'pic/sound_off.png';
    } else {
        audioMain.play();
        isMusicPlay = true;
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
        image.src = 'pic/sound_on.png';
    }
}
        
    //–ü–æ–∫–∞–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –º–µ—Å—Ç–∞ –°—É
    function showMisterSuHint() {
    document.getElementById("event_calendar_screen_id").style.display = "none";
    document.getElementById("open-card-id").style.display = "block";
    document.getElementById('card-text').innerHTML = "–°–µ—Ç –¢–í–û–ô –ë–†–û —Å–æ —Å–∫–∏–¥–∫–æ–π 25%";
}

// –°–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function hideDialog() {
    document.getElementById('open-card-id').style.display = "none";
    document.getElementById("event_calendar_screen_id").style.display = "block";    
    }

   
</script>

<script>
    let tg = window.Telegram.WebApp; //–ø–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç webapp —Ç–µ–ª–µ–≥—Ä–∞–º–∞ 
    tg.expand(); //—Ä–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤—Å–µ –æ–∫–Ω–æ     
    /*      
    document.getElementById('exit-game-lose').addEventListener('click', function(){
      tg.sendData("0");      
    });       
    */
    
 </script>
</body>
</html>