
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å –æ—Ç –°—É—à–∏ –ú–∞—Å—Ç–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> 
    <link rel="stylesheet" href="main.css">  
    <script src="questions.js"></script>        
</head>
<body>

<audio loop id="audioMain">
    <source src="music/main-asia.mp3" type="audio/mpeg">    
    –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
</audio>

<audio loop id="audioWin">
    <source src="music/win.mp3" type="audio/mpeg">    
    –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
</audio>

<audio loop id="audioTenQuestion">
    <source src="music/239084_10_question.mp3" type="audio/mpeg">    
    –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
</audio>

<div class="container">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="card-grid">
    
        <!-- –ë–ª–æ–∫ –æ–±–ª–æ–∂–∫–∏ -->
        <div class="cover"></div>
        
        <!-- –°—Ç—Ä–æ–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
        <div id="cards-container"></div>
    </div>
</div>

<div id = "start-screen-id" class="start-screen">
    <div>
        <div class="image-start-screen">            
            <img src="pic/rules_cat.png" alt="start_screen_cat_pic">
        </div>       
        <div class="title_28_black">
            <p>–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Å—è –∫ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–º—É –ø–∏–∫–Ω–∏–∫—É!</p>
        </div>        
        <div class="mistersu-hint-body">
            <p>–ë–æ–ª—å—à–∞—è –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ –æ—Ç –°—É—à–∏ –ú–∞—Å—Ç–µ—Ä ‚Äì —ç—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∏–π –º–∞–π—Å–∫–∏–π –º–∞—Ä–∞—Ñ–æ–Ω –∑–Ω–∞–Ω–∏–π.</p>
        </div>
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="show-rules" class="button-common button-common-rules">–ß–∏—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>      
        </div>                
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="start-game" class="button-common">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>      
        </div>
    </div>   
</div>

<div id = "rules-screen-id" class="rules-screen">
    <div>
        <div class="title_28_black">
            <p>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</p>
        </div>        
        <div class="image-rules-screen">            
            <img src="pic/little_cat_rules.png" alt="rules_screen_cat_pic">
        </div>               
        <div class="rules-screen-body">
            <br>
                –û—Ç–≤–µ—á–∞–π –Ω–∞ –º–∞–π—Å–∫–æ-–æ–≥–æ—Ä–æ–¥–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∏ –±–æ–Ω—É—Å—ã –ø–æ—Å—ã–ø–ª—é—Ç—Å—è, –∫–∞–∫ —Å–ø–µ–ª—ã–µ —è–±–ª–æ–∫–∏: üéâ.<br>
                <br>
                <b>80 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤</b> - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø—Ä–∏–∑. –ó–∞–±—Ä–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É - —Ä–µ—à–∞—Ç—å —Ç–µ–±–µ, –Ω–æ –µ—Å–ª–∏ –¥–æ–ø—É—Å—Ç–∏—à—å –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ, —Ç–æ –±–∞–ª–ª—ã –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ —Å–æ—Ä–Ω—è–∫–∏.<br>
                <br>
                <b>160 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤</b> - –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø—Ä–∏–∑. –£–∂–µ –∫—Ä–∞—Å–∞–≤—á–∏–∫, –Ω–æ –µ—â–µ –Ω–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å. –•–≤–∞—Ç–∞–π –∏ —Å—Ä–æ—á–Ω–æ —Ç—Ä–∞—Ç—å –Ω–∞ —Ä–æ–ª–ª—ã –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –ø—É—Ç—å, –Ω–æ –±–µ—Ä–µ–≥–∏—Å—å - –æ–¥–∏–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –±–æ–Ω—É—Å—ã –ø–æ–π–¥—É—Ç –Ω–∞ –∫–æ—Ä–º –∫—Ä–æ—Ç–∞–º.<br>
                <br>
                <b>300 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤</b> - –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑. –î–æ—Å—Ç–æ–π–Ω—ã —Ç–æ–ª—å–∫–æ –≥—É—Ä—É –º–∞–π—Å–∫–∏—Ö –ø–æ—Å–∏–¥–µ–ª–æ–∫ (—É –∫–æ–≥–æ –∏ —Ä–æ–ª–ª—ã, –∏ —à–∞—à–ª—ã–∫ –Ω–∞ —Å—Ç–æ–ª–µ). üéÅ! <br>            
        </div>        
        <div class="modal-footer" style="margin-top: 20px;">            
            <button id="start-game2" class="button-common">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>      
        </div>
    </div>   
</div>

<div id = "main_questions_screen_id" class="main_questions_screen">
    <div>
        <div class="ved_timer">
            <div class="image-main-screen-cat">            
                <img src="pic/ved_cat.png" alt="ved_screen_cat_pic">
            </div>
            <div class="timer-image">
                <div class="timer-text" id="timer">0</div>
            </div>           
        </div>
        
         <div class="bg_little">
            <div id="question_number_id" style="margin-left: 40px; margin-top: 20px;">4/10</div>
            <div id="question_prize_id" style="margin-left: 100px; margin-top: 20px;">80 –ë–ê–õ–õ–û–í</div>
        </div>
                
        <div  class="main-screen-body"> 
            <div id="question-text-id" style="margin-top: 50px;">—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</div>
        </div>    
                
        <div class="hints">
            <button class="btn-main-screen-hint" data-hint="5050">
                <img src="pic/50.png" alt="50_50_pic">
            </button>
            <button class="btn-main-screen-hint" data-hint="friend">
                <img src="pic/sushi_master.png" alt="sushi_pic">
            </button>
            <button id="show-results" class="btn-main-screen-option">
                <img src="pic/show_results.png" alt="show_result_pic">
            </button>
            <button id="music-off" class="btn-main-screen-option">
                <img src="pic/sound_pic.png" alt="turn_sound_pic">
            </button>                                                
        </div>
        
        <div class="game">                        
            <div class="question-container">                
                <div class="answers"></div>
            </div>                       
        </div>                        
    </div>
</div>

<div id = "game_stage_screen_id" class="game_stage_screen">
    <div class="question-list-conteiner">
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">1</div>
                <div style="margin-left: 100px; margin-top: 12px;">20 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">2</div>
                <div style="margin-left: 100px; margin-top: 12px;">40 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">3</div>
                <div style="margin-left: 100px; margin-top: 12px;">60 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item fireproof">
                <div style="margin-left: 40px; margin-top: 12px;">4</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
                <div style="margin-left: 10px; margin-top: 12px;">80 –ë–ê–õ–õ–û–í</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">5</div>
                <div style="margin-left: 100px; margin-top: 12px;">100 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">6</div>
                <div style="margin-left: 100px; margin-top: 12px;">120 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">7</div>
                <div style="margin-left: 100px; margin-top: 12px;">140 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item fireproof">
                <div style="margin-left: 40px; margin-top: 12px;">8</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
                <div style="margin-left: 10px; margin-top: 12px;">160 –ë–ê–õ–õ–û–í</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
            </div>
        </div>
       
        <div class="modal-footer">
            <div class="question-list-item">
                <div style="margin-left: 40px; margin-top: 12px;">9</div>
                <div style="margin-left: 100px; margin-top: 12px;">180 –ë–ê–õ–õ–û–í</div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="question-list-item fireproof">
                <div style="margin-left: 40px; margin-top: 12px;">10</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
                <div style="margin-left: 10px; margin-top: 12px;">300 –ë–ê–õ–õ–û–í</div>
                <img src="pic/gift.png" alt="Icon" class="icon" style="margin-left: 10px; width: 30px; height: 30px; margin-top: 8px;">
            </div>
        </div>

    </div>
    <div class="modal-footer">            
        <button id="return-game-button2" class="btn-modal-dialog">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–µ</button>            
    </div>
</div>

<div id="—Åongratulations-dialogue" class="modal-dialog">
    <div class="modal-content">
        <div class="modal-image">            
            <img id="modal-image-pic" src="pic/level1_prize_cat.png" alt="modal_image_pic">
        </div> 
        <div id="modal-header-id" class="modal-title">
            <p>–ü–æ–∑–¥—Ä–∞–≤–ª–µ–º!</p>
        </div>
        <div id='modal-text' class="mistersu-hint-body">
            <p> –¢—ã –¥–æ—Å—Ç–∏–≥ –ø–µ—Ä–≤–æ–π –Ω–µ—Å–≥–æ—Ä–∞–µ–º–æ–π —Å—É–º–º—ã –±–∞–ª–ª–æ–≤! –•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É –∏ –∏—Å–ø—ã—Ç–∞—Ç—å —É–¥–∞—á—É –∏–ª–∏ –∂–µ–ª–∞–µ—à—å –∑–∞–±—Ä–∞—Ç—å —Å–≤–æ–π –ø—Ä–∏–∑?</p>
        </div>
        <div id = "modal-footer-bronze-silver" class="modal-footer">
            <button type="button" id="btn-modal-dialog-take-prize-bronze-silver" class="btn-modal-dialog-take-prize">
                <img src="pic/gift.png" alt="Icon" class="icon" style="width: 40px; height: 40px; margin-top: 10px;">
                <span class="btn-modal-dialog-take-prize-text">–ü—Ä–∏–∑</span>
            </button>           
            <button id="continue-game-btn" class="btn-modal-dialog-continue">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
        <div class="modal-footer-gold hidden">
            <button type="button" id="btn-modal-dialog-take-prize-gold" class="btn-modal-dialog-take-prize-gold">
                <img src="pic/gift.png" alt="Icon" class="icon" style="width: 40px; height: 40px;">
                <span class="btn-modal-dialog-take-prize-text">–ó–∞–±—Ä–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑</span>
            </button>                       
        </div>
        
    </div>
</div>

<div id="mistersuhint" class="mistersu-dialog">
    <div>
        <div class="modal-image">            
            <img src="pic/mister_—Å—É_pic.png" alt="mister_—Å—É_pic">
        </div>       
        <div class="modal-title">
            <p>–ü–û–î–°–ö–ê–ó–ö–ê –ú–ê–°–¢–ï–†–ê –°–£</p>
        </div>        
        <div id="mistersu-hint-text" class="mistersu-hint-body">
            <p>–¢–µ–∫—Å—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏</p>
        </div>
        <!-- <div id="palki" class="modal-palki">
            <img src="pic/palki.png" alt="palki_pic">
        </div>    -->
        <div class="modal-footer">            
            <button id="return-game-button" class="btn-modal-dialog">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–µ</button>            
        </div>
    </div>
</div>

<div id="losegame" class="lose-game-dialog">
    <div>
        <div class="modal-image-lose">            
            <img src="pic/lose_cat_2.png" alt="lose_game_cat2_pic">
        </div>       
        <div class="title_28_black">
            <p>–≠—Ö, –±—ã–≤–∞–µ—Ç</p>
        </div>        
        <div class="mistersu-hint-body">
            <p>–ó–Ω–∞–Ω–∏—è –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–≤–µ–ª–∏. –ù–æ –Ω–µ —Å–¥–∞–≤–∞–π—Å—è, –ø—Ä–æ–±—É–π –µ—â–µ!</p>
        </div>        
        <div class="modal-palki">            
            <img src="pic/leika.png" alt="leika_pic">
        </div>     
        <div class="modal-footer">            
            <button id="exit-game-lose" class="btn-modal-lose-game-dialog">–í—ã—Ö–æ–¥</button>            
        </div>
    </div>
</div>

<script>

const cards = [
    { title: '–ö–∞—Ä—Ç–∞ 1', description: '1 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 2', description: '2 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 3', description: '3 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 4', description: '4 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 5', description: '5 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 6', description: '6 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 7', description: '7 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 8', description: '8 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 9', description: '9 –¥–µ–∫–∞–±—Ä—è' },
    { title: '–ö–∞—Ä—Ç–∞ 10', description: '10 –¥–µ–∫–∞–±—Ä—è' }    
];


let rowsContainer = document.getElementById('cards-container');
for(let i=0; i<Math.ceil(cards.length/3); i++) {
    let rowDiv = document.createElement('div');
    rowDiv.className = 'row';
    
    for(let j=0; j<3 && ((i*3)+j)<cards.length; j++) {
        const cardData = cards[(i*3)+j];
        let cardDiv = document.createElement('div');
        cardDiv.className = 'card';
        if(i === Math.floor(cards.length/3)) { // –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞?
            cardDiv.className += ' last-row-card'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–∞—Ä—Ç—ã
        }
        cardDiv.innerHTML = `
            <h3>${cardData.title}</h3>
            <p>${cardData.description}</p>
        `;
        rowDiv.appendChild(cardDiv);
    }
    rowsContainer.appendChild(rowDiv);
}



let currentQuestion = 0;
let hintsUsed = [];
let totalPrize = 0;
let isMusicPlay = true;

let prizeDiscounteLevel = "0";
const goldLevel = "GOLD";
const silverLevel = "SILVER";
const bronzeLevel = "BRONZE";

let timerInterval = null;
const SECONDS_FOR_ONE_QUESTION = 30;
const PRIZE_ONE_QUESTION = 20;
const QUESTION_ALL = 10;
let audioMain = document.getElementById("audioMain");
let audioWin = document.getElementById("audioWin");
let audioTenQuestion = document.getElementById("audioTenQuestion");
let availableQuestionsLight = window.questions_light ? [...window.questions_light] : [];
let availableQuestionsHard = window.questions_hard ? [...window.questions_hard] : [];
let question = null;

document.getElementById('start-game').addEventListener('click', startGame);
document.getElementById('start-game2').addEventListener('click', startGame);
document.getElementById('show-rules').addEventListener('click', showRules);
document.getElementById('show-results').addEventListener('click', showResultScreen);
document.getElementById('music-off').addEventListener('click', switchMusic);


document.getElementById('timer').textContent = SECONDS_FOR_ONE_QUESTION;
document.getElementById("continue-game-btn").addEventListener("click", function () {
    hideDialog(); // –°–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
    continueGame(); // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–≥—Ä—ã
});
document.getElementById("return-game-button").addEventListener("click", hideDialogMisterSuHint);
document.getElementById("return-game-button2").addEventListener("click", continueGame);

document.getElementById("exit-game-lose").addEventListener("click", function () {
    //—Ç—É—Ç –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∏–≥—Ä—É —Å –ø—Ä–∏–∑–æ–º NONE
    hideDialog()
});

document.querySelectorAll('.btn-main-screen-hint').forEach(button => {
        button.addEventListener('click', () => useHint(button.dataset.hint));
    });
       
    function startGame() {
        document.getElementById("main_questions_screen_id").style.display = "block";
        document.getElementById('start-screen-id').style.display = "none";
        document.getElementById('rules-screen-id').style.display = "none";                
        audioMain.volume = 0.2;
        audioWin.volume = 0.2;
        audioTenQuestion.volume = 0.2;
        audioMain.play();       
        checkGameProgress()
    }

    function showRules() {
        document.getElementById("rules-screen-id").style.display = "block";
        document.getElementById('start-screen-id').style.display = "none";        
        audioMain.volume = 0.2;
        audioWin.volume = 0.2;
        audioTenQuestion.volume = 0.2;
        audioMain.play();               
    }

    
    function startTimer() {
        let timeLeft = SECONDS_FOR_ONE_QUESTION;                
            if (!timerInterval) {
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        document.getElementById('timer').innerText = timeLeft;                        
                    } else {
                        resetTimerForNextQuestion()
                        showFinalScreen(false)                        
                    }
                }, 1000);
            }            
        }
    function resetTimerForNextQuestion() {        
        document.getElementById('timer').innerText = SECONDS_FOR_ONE_QUESTION;
        clearInterval(timerInterval);
        timerInterval = null
    }    

    function checkGameProgress () {
        resetTimerForNextQuestion();  
        
        if (currentQuestion >= QUESTION_ALL) {            
            showFinalScreen(true);
            return;
        }

        switch (currentQuestion) {
            case 4:
                showModalDialog(bronzeLevel);                
                break;           
            case 8:                
                showModalDialog(silverLevel);
                break;
            default: nextQuestion()                 
        }        
                
    }

    function nextQuestion() {                       

        console.log(`–∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å —Ñ—É–Ω–∫—Ü–∏—è —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å`);

        if (currentQuestion + 1 === QUESTION_ALL) {
        audioMain.pause()
        audioTenQuestion.play()    
        question = getRandomQuestion(availableQuestionsHard);
        document.getElementById('question_prize_id').textContent = `300 –ë–ê–õ–õ–û–í`;                
        } else {
        question = getRandomQuestion(availableQuestionsLight);
        document.getElementById('question_prize_id').textContent = `${(currentQuestion + 1)*PRIZE_ONE_QUESTION} –ë–ê–õ–õ–û–í`;                
        }               
        document.querySelector('.answers').innerHTML = '';                       
        startTimer()               
        
        document.getElementById('question-text-id').textContent = question.question;
        document.getElementById('question_number_id').textContent = `${currentQuestion + 1} / 10`;  
               
        
        question.answers.forEach(answer => {            
            const button = document.createElement('button');
            button.className = 'answer-button';
            button.textContent = answer;
            button.addEventListener('click', () => checkAnswer(answer, button));
            document.querySelector('.answers').appendChild(button);            
        });           
    }

    function getRandomQuestion(availableQuestions) {
    const index = Math.floor(Math.random() * availableQuestions.length);
    const question = availableQuestions[index]; // –ü–æ–ª—É—á–∞–µ–º –≤–æ–ø—Ä–æ—Å –ø–æ —ç—Ç–æ–º—É –∏–Ω–¥–µ–∫—Å—É    
    availableQuestions.splice(index, 1);
    return question;
    }

    function checkAnswer(answer, button) {        
        button.style.backgroundColor = '#C98F22';        
        button.style.transform = 'scale(1.05)';       
        button.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.25)'; 

        if (answer === question.correctAnswer) {
            totalPrize += PRIZE_ONE_QUESTION*(currentQuestion+1);
            currentQuestion++;            
            setTimeout(checkGameProgress, 1000);
        } else {            
            showFinalScreen(false);
        }
    }

    function useHint(hintType) {
        if (hintsUsed.includes(hintType)) return;
        hintsUsed.push(hintType);
        
        const hintButtons = document.querySelectorAll('.btn-main-screen-hint');
        for (let i = 0; i < hintButtons.length; i++) {
            if (hintButtons[i].dataset.hint === hintType) {
                    hintButtons[i].classList.add('disabled');                    
                    break;                                 
            }
        }

        switch (hintType) {
            case 'friend':
                showMisterSuHint(question);                
                break;           
            case '5050':
                removeTwoWrongAnswers(question);
                break;            
        }
    }

    function removeTwoWrongAnswers(question) {        
        const wrongAnswers = question.answers.filter(answer => answer !== question.correctAnswer);
        const randomIndexes = Array.from({length: wrongAnswers.length}, (_, i) => i).sort(() => Math.random() - 0.5).slice(0, 2);

        wrongAnswers.forEach((wrongAnswer, index) => {
            if (randomIndexes.includes(index)) {
                const buttons = document.querySelectorAll('.answer-button');
                buttons.forEach(button => {
                    if (button.textContent === wrongAnswer) {
                        button.style.display = 'none';                        
                    }
                });
            }
        });
    }

    function showResultScreen() {
        document.getElementById("main_questions_screen_id").style.display = "none";
        document.getElementById("game_stage_screen_id").style.display = "block";
    }

    function switchMusic() {
        
        if(isMusicPlay) {
            audioMain.pause();
            isMusicPlay = false;
            document.getElementById('music-off').classList.add('btn-main-screen-option-active');            
        } else {
            audioMain.play();
            isMusicPlay = true;
            document.getElementById('music-off').classList.remove('btn-main-screen-option-active');            
        }        
    }

    function showFinalScreen(isWin) {
        audioMain.pause()  
        audioTenQuestion.pause()                      
        if(isWin) {            
            audioWin.play()
            showModalDialog(goldLevel);
        } else {   
            document.getElementById("losegame").style.display = "block";          
        }         
    }

    // –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function showModalDialog(level) {

        let textHeaderElement = document.getElementById('modal-header-id');
        let modalTextElement = document.getElementById('modal-text');
        let modalImage = document.getElementById('modal-image-pic');
        document.getElementById("main_questions_screen_id").style.display = "none";
        document.getElementById("—Åongratulations-dialogue").style.display = "block";

        switch (level) {
            case bronzeLevel:
            textHeaderElement.textContent = '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!';
            modalTextElement.textContent = '80 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤ - –ø–µ—Ä–≤—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø—Ä–∏–∑. –ó–∞–±—Ä–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É - —Ä–µ—à–∞—Ç—å —Ç–µ–±–µ, –Ω–æ –µ—Å–ª–∏ –¥–æ–ø—É—Å—Ç–∏—à—å –æ—à–∏–±–∫—É –¥–∞–ª—å—à–µ, —Ç–æ –±–∞–ª–ª—ã –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ —Å–æ—Ä–Ω—è–∫–∏.';
            modalImage.src = 'pic/level1_prize_cat.png';  
            prizeDiscounteLevel = bronzeLevel;              
                break;           
            case silverLevel:            
            textHeaderElement.textContent = '–í–∞—É!';
            modalTextElement.textContent = '160 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤ - –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø—Ä–∏–∑. –£–∂–µ –∫—Ä–∞—Å–∞–≤—á–∏–∫, –Ω–æ –µ—â–µ –Ω–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å. –•–≤–∞—Ç–∞–π –∏ —Å—Ä–æ—á–Ω–æ —Ç—Ä–∞—Ç—å –Ω–∞ —Ä–æ–ª–ª—ã –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –ø—É—Ç—å, –Ω–æ –±–µ—Ä–µ–≥–∏—Å—å - –æ–¥–∏–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –±–æ–Ω—É—Å—ã –ø–æ–π–¥—É—Ç –Ω–∞ –∫–æ—Ä–º –∫—Ä–æ—Ç–∞–º.';                
            modalImage.src = 'pic/level2_prize_cat.png';
            prizeDiscounteLevel = silverLevel;              
                break;
            case goldLevel:                            
            document.getElementById('modal-footer-bronze-silver').style.display = 'none';
            document.querySelector('.modal-footer-gold').classList.remove('hidden');
            document.querySelector('.modal-footer-gold').style.display = 'flex';
            document.querySelector('.modal-footer-gold').style.justifyContent = 'center';
            textHeaderElement.textContent = '–ü–æ–±–µ–¥–∞!';
            modalTextElement.textContent = '–¢—ã –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –≤—ã–∏–≥—Ä–∞–ª 300 –±–∞–ª–ª–æ–≤! –ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –ø—Ä–µ–∫–ª–æ–Ω—è—é—Ç—Å—è –≤—Å–µ –≥—É—Ä—É –ø–∏–∫–Ω–∏–∫–æ–≤, –ø–æ–≤–µ–ª–∏—Ç–µ–ª–∏ –¥–∞—á –∏ –≥—Ä–æ–∑—ã —Å—É–±–±–æ—Ç–Ω–∏–∫–æ–≤ ;)';
            modalImage.src = 'pic/level3_prize_cat.png';                    
            prizeDiscounteLevel = goldLevel;              
                break;    
        }

       
    }

    //–ü–æ–∫–∞–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –º–µ—Å—Ç–∞ –°—É
function showMisterSuHint(question) {
    let quetionsVariant = getCurrentQuestionListForMisterSu(question);
    let randomHintText = quetionsVariant[Math.floor(Math.random() * quetionsVariant.length)];
    document.getElementById("main_questions_screen_id").style.display = "none";
    document.getElementById("mistersuhint").style.display = "block";
    document.getElementById('mistersu-hint-text').innerHTML = randomHintText;
}

function getCurrentQuestionListForMisterSu(question) {
    let correctAnswer = question.correctAnswer

    return friendHints = [
    '–•–º... –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –ú–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–º–ø–∞—Å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ <strong>' + correctAnswer + '</strong>, –Ω–æ... –≤–¥—Ä—É–≥ —ç—Ç–æ –ª–æ–≤—É—à–∫–∞? –í –æ–±—â–µ–º, —Ä–µ—à–∞–π —Å–∞–º, —è –ª–∏—à—å —Å–∫—Ä–æ–º–Ω—ã–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∑–∞ –∑–≤—ë–∑–¥–Ω—ã–º –Ω–µ–±–æ–º.',
    '–í–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ, –æ—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>. –ù–æ —è –±—ã –Ω–∞ —Ç–≤–æ—ë–º –º–µ—Å—Ç–µ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏–ª –≤—Å—ë —Ç—Ä–∏–∂–¥—ã, –∞ –ø–æ—Ç–æ–º –µ—â—ë —Ä–∞–∑. –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π. –ü—Ä–æ—Å—Ç–æ –Ω–∞ –≤—Å—è–∫–∏–π.',
    '–ü–æ –º–æ–∏–º —Ä–∞—Å—á—ë—Ç–∞–º (–∫–æ—Ç–æ—Ä—ã–µ, –∫–æ–Ω–µ—á–Ω–æ, –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–µ–≥–∫–∞ –Ω–µ—Ç–æ—á–Ω—ã–º–∏), –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>. –ù–æ... —è –±—ã –Ω–µ —Å—Ç–∞–ª –Ω–∞ —ç—Ç–æ–º —Å–ª–∏—à–∫–æ–º –Ω–∞—Å—Ç–∞–∏–≤–∞—Ç—å. –í–¥—Ä—É–≥ —ç—Ç–æ –≤—Å—ë –∑–∞–≥–æ–≤–æ—Ä?',
    '–ò–Ω—Ç—É–∏—Ü–∏—è –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –º–Ω–µ <strong>' + correctAnswer + '</strong>, –Ω–æ –∏–Ω—Ç—É–∏—Ü–∏—è ‚Äì —à—Ç—É–∫–∞ –∫–∞–ø—Ä–∏–∑–Ω–∞—è. –í–æ–Ω, –≤—á–µ—Ä–∞ –æ–Ω–∞ –º–Ω–µ —Å–∫–∞–∑–∞–ª–∞, —á—Ç–æ –¥–æ–∂–¥—å –±—É–¥–µ—Ç ‚Äì –∞ –æ–Ω, –≤–∏–¥–∏—Ç–µ –ª–∏, –Ω–µ –ø–æ—à—ë–ª! –ó–∞–¥—É–º–∞–π—Å—è –Ω–∞–¥ —ç—Ç–∏–º‚Ä¶',
    '–Ø –≤–∏–∂—É... —è –≤–∏–∂—É... –ê–≥–∞! –û—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>. –ü–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞. –ù–æ... –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ, —Å–æ–≤—Å–µ–º –∫—Ä–æ—à–µ—á–Ω–æ–µ, –µ–¥–≤–∞ —É–ª–æ–≤–∏–º–æ–µ —Å–æ–º–Ω–µ–Ω–∏–µ...',
    '–ú–æ–π –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ö—Ä—É—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä (–Ω—É, –æ–±—ã—á–Ω—ã–π —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–π, –Ω–æ –∑–≤—É—á–∏—Ç —Ç–∞–∫ –∫—Ä—É—á–µ) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç <strong>' + correctAnswer + '</strong>. –û–¥–Ω–∞–∫–æ, —ç—Ç–æ—Ç —à–∞—Ä —Å–µ–≥–æ–¥–Ω—è –Ω–µ–º–Ω–æ–≥–æ –º—É—Ç–Ω–æ–≤–∞—Ç. –ú–æ–∂–µ—Ç, –µ–≥–æ –ø—Ä–æ—Ç–µ—Ä–µ—Ç—å? –ò–ª–∏ –≤—Å—ë-—Ç–∞–∫–∏ —Ä–∏—Å–∫–Ω—É—Ç—å?',
    '–°–æ–≥–ª–∞—Å–Ω–æ –¥—Ä–µ–≤–Ω–∏–º —Å–≤–∏—Ç–∫–∞–º (–Ω—É, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —è —ç—Ç–æ –≤ –í–∏–∫–∏–ø–µ–¥–∏–∏ –ø—Ä–æ—á–∏—Ç–∞–ª), –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>. –û–¥–Ω–∞–∫–æ, –¥—Ä–µ–≤–Ω–∏–µ —Å–≤–∏—Ç–∫–∏ —á–∞—Å—Ç–æ –æ—à–∏–±–∞—é—Ç—Å—è.',
    '–ó–≤—ë–∑–¥—ã –Ω–∞–º–µ–∫–∞—é—Ç –Ω–∞ –æ—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>, –Ω–æ —è –ø–æ–¥–æ–∑—Ä–µ–≤–∞—é, —á—Ç–æ —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω–µ. –ò–ª–∏ –∏–º–µ–µ—Ç? –ó–∞–≥–∞–¥–∫–∞!',
    '–ò–Ω—Å—Ç–∏–Ω–∫—Ç—ã –∫—Ä–∏—á–∞—Ç "<strong>' + correctAnswer + '</strong>", –Ω–æ –º–æ–∏ –∏–Ω—Å—Ç–∏–Ω–∫—Ç—ã —á–∞—Å—Ç–æ –≤–µ–¥—É—Ç –º–µ–Ω—è –∫ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫—É, –∞ –Ω–µ –∫ –≤–µ—Ä—à–∏–Ω–∞–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞. –°–¥–µ–ª–∞–π –≤—ã–≤–æ–¥—ã.',
    '–°–æ–≥–ª–∞—Å–Ω–æ –º–æ–µ–π —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–π –Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫–µ), –æ—Ç–≤–µ—Ç ‚Äì <strong>' + correctAnswer + '</strong>. –ù–æ —Å–∞–ª—Ñ–µ—Ç–∫–∞ –Ω–µ–º–Ω–æ–≥–æ –∑–∞–ª—è–ø–∞–Ω–∞ —Å–æ—É—Å–æ–º —Ç–µ—Ä–∏—è–∫–∏. –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å? –ù–µ –¥—É–º–∞—é...',
    '–õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç <strong>' + correctAnswer + '</strong>, –Ω–æ –ª–æ–≥–∏–∫–∞ ‚Äì —Å—É—Ö–∞—è –Ω–∞—É–∫–∞. –ê –∂–∏–∑–Ω—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞ –∏ –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∞. –ö–∞–∫ –∏ –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤.'
];
} 

// –°–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function hideDialog() {
    document.getElementById('—Åongratulations-dialogue').style.display = "none";
    document.getElementById('mistersuhint').style.display = "none";
    document.getElementById('losegame').style.display = "none";
    document.getElementById('game_stage_screen_id').style.display = "none";
    document.getElementById("main_questions_screen_id").style.display = "block";
    nextQuestion()
    }

function hideDialogMisterSuHint() {
    document.getElementById('mistersuhint').style.display = "none";
    document.getElementById("main_questions_screen_id").style.display = "block";
    
    }    

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏–≥—Ä—ã
    function continueGame() {
        hideDialog(); // –°–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥                   
    }

// –§—É–Ω–∫—Ü–∏—è –∑–∞–±—Ä–∞–Ω–∏—è –ø—Ä–∏–∑–∞
    function claimPrize() {    
    showFinalScreen(true)    
    }   
   
</script>

<script>
    let tg = window.Telegram.WebApp; //–ø–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç webapp —Ç–µ–ª–µ–≥—Ä–∞–º–∞ 
    tg.expand(); //—Ä–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤—Å–µ –æ–∫–Ω–æ     
          
    document.getElementById('exit-game-lose').addEventListener('click', function(){
      tg.sendData("0");      
    });   

    document.getElementById('btn-modal-dialog-take-prize-bronze-silver').addEventListener('click', function(){
      tg.sendData(prizeDiscounteLevel);      
    });   

    document.getElementById('btn-modal-dialog-take-prize-gold').addEventListener('click', function(){
      tg.sendData(prizeDiscounteLevel);      
    });      
    
 </script>
</body>
</html>